<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="El mejor lugar para tus hamburguesas">
    <title>Bite & Grill</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../styles/pagar.css">
</head>

<body>
    <header>
        <div class="navbar">
            <a href="../../index.html" class="logo">
                <img src="../images/logo.png" alt="Logo Bite&Grill" class="logo-img">
            </a>
            <div class="nav-links">
                <a href="carta.html">CARTA</a>
                <a href="domicilio.html">A DOMICILIO</a>
                <a href="reserva.html">RESERVAS</a>
            </div>
        </div>
    </header>

    <div class="pagar">
        <div class="container">
            <input type="text" id="nombre" placeholder="Nombre" required>
            <input type="tel" id="telefono" placeholder="Teléfono (Ej: 633344926)" required pattern="[0-9]{9}">
            <input type="email" id="email" placeholder="Correo electrónico" required>
            <input type="text" id="direccion" placeholder="Dirección" required>
            <button id="pagarBtn">Pagar (0.0 €)</button>
            <p id="error-message" style="color: red; display: none; margin-top: 10px;"></p>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const botonPagar = document.getElementById("pagarBtn");
            const errorMessage = document.getElementById("error-message");

            // Obtener el precio guardado en localStorage
            const precio = localStorage.getItem("precioPagar");
            if (precio) {
                botonPagar.textContent = `Pagar  (${precio} €)`;
            }

            // Validación antes de redirigir a PayPal
            botonPagar.addEventListener("click", () => {
                const nombre = document.getElementById("nombre").value.trim();
                const telefono = document.getElementById("telefono").value.trim();
                const email = document.getElementById("email").value.trim();
                const direccion = document.getElementById("direccion").value.trim();

                // Validación de teléfono (9 dígitos numéricos)
                const telefonoValido = /^[0-9]{9}$/.test(telefono);

                // Validación de correo
                const emailValido = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

                if (!nombre || !direccion) {
                    errorMessage.textContent = "Por favor, introduce un nombre y dirección.";
                    errorMessage.style.display = "block";
                    return;
                }

                if (!telefonoValido) {
                    errorMessage.textContent = "El teléfono debe tener 9 dígitos numéricos (Ej: 633344926).";
                    errorMessage.style.display = "block";
                    return;
                }

                if (!emailValido) {
                    errorMessage.textContent = "Introduce un correo válido (Ej: usuario@dominio.com).";
                    errorMessage.style.display = "block";
                    return;
                }

                // Si todo es correcto, redirige a PayPal
                errorMessage.style.display = "none";
                window.location.href = "https://www.paypal.com/es/digital-wallet/ways-to-pay/checkout-with-paypal";
            });
        });
    </script>

    <footer>
        <div class="footer-rail">
            <div class="rail-content">
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
            </div>
            <div class="rail-content">
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
                <h4 class="texto-blanco">NACIDOS PARA MORDER</h4>
                <h4 class="texto-borde">NACIDOS PARA MORDER</h4>
            </div>
        </div>
        <div class="contenedor-footer">
            <div>
                <a href="#">INICIO</a>
                <a href="#">CARTA</a>
                <a href="#">A DOMICILIO</a>
                <a href="#">RESERVAS</a>
            </div>
            <div>
                <span class="title">CONDICIONES</span>
                <a href="#">POLÍTICA DE PRIVACIDAD</a>
                <a href="#">POLÍTICA DE COOKIES</a>
                <a href="#">PREGUNTAS FRECUENTES</a>
            </div>
            <div>
                <span class="title">REDES SOCIALES</span>
                <div class="social-icons">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-x-twitter"></i></a>
                </div>
            </div>
        </div>
    </footer>
</body>

</html>